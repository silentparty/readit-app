<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/app-layout/app-layout.html">
<link rel="import" href="../../bower_components/app-layout/app-header-layout/app-header-layout.html">
<link rel="import" href="../../bower_components/app-layout/app-header/app-header.html">
<link rel="import" href="../../bower_components/app-layout/app-toolbar/app-toolbar.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/app-route/app-route.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../../bower_components/paper-tabs/paper-tabs.html">

<link rel="import" href="readit-homepage.html">

<dom-module id="readit-userpage">
    <template>
    
        <style include="shared-styles">
            :host {
                display: block;
            }
        </style>
        
        <!-- About user section -->
        <iron-ajax 
            auto
            id="ajax"
            url="https://www.reddit.com/user/[[routeData.user]]/about.json"
            handle-as="json"
            last-response="{{userData}}"
            loading="{{loading}}"
        ></iron-ajax>

        <app-route
            route="{{route}}"
            pattern="/u/:user"
            data="{{routeData}}"
        ></app-route>
        
        <app-header-layout id="layout" has-scrolling-region fullbleed>
          <app-header slot="header" condenses reveals id="header">
            <app-toolbar>
                <paper-icon-button icon="menu" on-tap="_openMenu"></paper-icon-button>
                <div main-title>u/[[userData.data.name]] â€¢ <span class="small">[[userData.data.comment_karma]] karma</span></div>
            </app-toolbar>
            <paper-tabs selected="{{selected}}" attr-for-selected="name">
                <paper-tab name="submitted">Submitted</paper-tab>
                <paper-tab name="comments">Comments</paper-tab>
            </paper-tabs>
          </app-header>


          <readit-post-list subreddit="[[routeData.user]]/[[selected]]" target="[[target]]"></readit-post-list>

        </app-header-layout>


    </template>
    
    <script>
    class ReaditUserpage extends ReaditHomepage {
        static get is() { return "readit-userpage"; }
        static get properties() {
            return {
                /**
                * Default tab selection
                */
                selected: {
                    type: String,
                    value: 'submitted'
                }
                
            }
        }
    }
    window.customElements.define(ReaditUserpage.is, ReaditUserpage)
    </script>
    
</dom-module>