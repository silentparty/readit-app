<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/app-layout/app-layout.html">
<link rel="import" href="../../bower_components/app-layout/app-header-layout/app-header-layout.html">
<link rel="import" href="../../bower_components/app-layout/app-header/app-header.html">
<link rel="import" href="../../bower_components/app-layout/app-toolbar/app-toolbar.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/app-route/app-route.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">


<link rel="import" href="readit-homepage.html">

<dom-module id="readit-subreddit">
    <template>
    
        <style include="shared-styles">
            :host {
                display: block;
            }
        </style>

        <iron-ajax 
            auto
            id="ajax"
            url="https://www.reddit.com/r/[[routeData.subreddit]]/about.json"
            handle-as="json"
            last-response="{{about}}"
            loading="{{loading}}"
            last-response="{{subReddit}}"
        ></iron-ajax>

        <app-route
            route="{{route}}"
            pattern="/r/:subreddit"
            data="{{routeData}}"
        ></app-route>
        
        <app-header-layout id="layout" has-scrolling-region fullbleed>
          <app-header slot="header" condenses reveals id="header">
            <app-toolbar>
            <paper-icon-button icon="menu" on-tap="_openMenu"></paper-icon-button>
              <div main-title>[[about.data.display_name]]</div>
            </app-toolbar>
          </app-header>

          <readit-post-list subreddit="r/[[routeData.subreddit]]" target="[[target]]"></readit-post-list>

        </app-header-layout>


    </template>
    
    <script>
    class ReaditSubreddit extends ReaditHomepage {
        static get is() { return "readit-subreddit"; }
    }
    window.customElements.define(ReaditSubreddit.is, ReaditSubreddit)
    </script>
    
</dom-module>