<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">

<dom-module id="readit-subreddit-list">
    <template>
    
        <style include="shared-styles">
            a {
                display: block;
                padding: var(--spacing-sm);
            }
        </style>

        <iron-ajax 
            auto
            id="ajax"
            url="https://www.reddit.com/subreddits/default.json"
            handle-as="json"
            loading="{{loading}}"
            last-response="{{subReddits}}"
        ></iron-ajax>
        <ul>
            <li><a href="/u/5ilentparty">u/5ilentparty</a></li>
        </ul>
        <template is="dom-repeat" items="{{subReddits.data.children}}">
            <a href="[[item.data.url]]" on-tap="_itemTapped">[[item.data.display_name]]</a>
        </template>

    </template>
    
    <script>
    class ReaditSubredditList extends Polymer.GestureEventListeners(Polymer.Element) {
        static get is() { return "readit-subreddit-list"; }
    
        _itemTapped() {
            let menuEvent = new CustomEvent('readit-toggle-menu', {bubbles: true, composed: true})
            this.dispatchEvent(menuEvent)
        }

    }
    customElements.define(ReaditSubredditList.is, ReaditSubredditList)
    </script>
    
</dom-module>