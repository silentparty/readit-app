<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/app-layout/app-layout.html">
<link rel="import" href="../../bower_components/app-layout/app-header-layout/app-header-layout.html">
<link rel="import" href="../../bower_components/app-layout/app-header/app-header.html">
<link rel="import" href="../../bower_components/app-layout/app-toolbar/app-toolbar.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="readit-post-list.html">

<dom-module id="readit-homepage">
  <template>
    <style include="shared-styles">
      :host {
        display: block;
      }
    </style>

    <app-header-layout id="layout" has-scrolling-region fullbleed>
      <app-header slot="header" condenses reveals id="header">
        <app-toolbar>
        <paper-icon-button icon="menu" on-tap="_openMenu"></paper-icon-button>
          <div main-title>Readit</div>
        </app-toolbar>
      </app-header>
          
      <readit-post-list target="[[target]]" subreddit="home"></readit-post-list>
     
    </app-header-layout>
      
  </template>
  <script>
    class ReaditHomepage extends Polymer.GestureEventListeners(Polymer.Element) {
      static get is() { return 'readit-homepage'; }
      static get properties() {
        return {
        }
      }
      connectedCallback(){
        super.connectedCallback()
        this._getScrollTarget()
      }
      /**
      * Sets the property target to the scrolling container of the app header layout
      */
      _getScrollTarget() {
        this.target = this.shadowRoot.querySelector('#layout').shadowRoot.querySelector('#contentContainer');    
      }

      _openMenu() {
          // See https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent
          let menuEvent = new CustomEvent('readit-toggle-menu', {bubbles: true, composed: true})
          this.dispatchEvent(menuEvent)
      }
    }
    window.customElements.define(ReaditHomepage.is, ReaditHomepage);
  </script>
</dom-module>